version: "3.8"
services:
  shopapi:
    container_name: shop_api
    build:
      context: .
      args:
        CONTAINER_PORT: 8081
    image: shop-api:v1
    environment:
      POSTGRES_USERNAME: admin
      POSTGRES_PASSWORD: admin
      POSTGRES_HOST: database
      POSTGRES_PORT: 5432
      POSTGRES_DATABASE: shop-2
      CONTAINER_PORT: 8081
      ACTIVE_PROFILE: local
      JWT_SECRET: 23ba62f3727a413e3a160695bd3723125cb881b863ae3014c25b181393337ed6d77f5153f2462df71e4d4fd90579aabfb068636433bbcb6394ac1b48ff9dfe78c467dcca62b200bf6ea2c0ea6b87e311ecc38bcc6e0400f3cd1c2e3941a6571980d646f814ead14e67ed9df1687f684550a13e9b747e45ed3896ad6bc19a8583667829a657c6120b6b9f0bb16513a730574cc435734f32c5448c1eec5a516fd5ca34b98797c07b83e887b51e3f8aaf7e50bce56937c23b0a341b872ad796e7a49047a4fd2259ea2593a96973977ff7b573f08cfb7b6d66df78269d01f9e3cf3ca7ff9a36d72ead6f2fe6e4e37b01079d0768642fb0677194602973819c4d9df8
    depends_on:
      - database
    ports:
      - "8081:8081"

  database:
    container_name: shop_api_db
    image: postgres:16.2-alpine
    environment:
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: admin
      POSTGRES_DB: shop-2
    ports:
      - "5434:5432"
